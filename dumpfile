--
-- PostgreSQL database dump
--

-- Dumped from database version 16.3 (Ubuntu 16.3-0ubuntu0.24.04.1)
-- Dumped by pg_dump version 16.3 (Ubuntu 16.3-0ubuntu0.24.04.1)

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

--
-- Name: change_avg_quotation(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.change_avg_quotation() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
declare
sum numeric(20, 5);
n bigint;
begin
 	if (tg_op = 'INSERT') then
		select sum(quantity * quotation), sum(quantity)
		into sum, n from queue
		where id_portfolio = new.id_portfolio and id_securitie = new.id_securitie;
		
		update portfolio_to_securitie
		set avg_quotation = (sum + new.quantity * new.quotation) / (n + new.quantity)
		where id_portfolio = new.id_portfolio and id_securitie = new.id_securitie;
		
		return new;
 	elsif (tg_op = 'DELETE') then
		select sum(quantity * quotation), sum(quantity)
		into sum, n from queue
		where id_portfolio = old.id_portfolio and id_securitie = old.id_securitie;

		update portfolio_to_securitie
		set avg_quotation = (sum - old.quantity * old.quotation) / (n - old.quantity)
		where id_portfolio = old.id_portfolio and id_securitie = old.id_securitie;
		
		return old;
 	end if;
end;
$$;


ALTER FUNCTION public.change_avg_quotation() OWNER TO postgres;

--
-- Name: change_balance(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.change_balance() RETURNS trigger
    LANGUAGE plpgsql
    AS $$begin
	with s as (select id_portfolio, sum(total_quantity * (select quotation from securities
														  where id_securitie = p.id_securitie)) sum
			   from portfolio_to_securitie p
			   group by id_portfolio)
	update portfolios p
	set balance = s.sum from s
	where p.id_portfolio = s.id_portfolio;
	
	return new;
end;
$$;


ALTER FUNCTION public.change_balance() OWNER TO postgres;

--
-- Name: change_deposition_balance_funds(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.change_deposition_balance_funds() RETURNS trigger
    LANGUAGE plpgsql
    AS $$begin
	if (new.oper_type) then
		update portfolios
		set deposition = deposition + new.amount,
			balance = balance + new.amount
		where id_portfolio = new.id_portfolio;

		update portfolio_to_securitie
		set total_quantity = total_quantity + new.amount
		where id_portfolio = new.id_portfolio and id_securitie = 36;
	else
		if (new.amount <= (select total_quantity from portfolio_to_securitie
					 where id_portfolio = new.id_portfolio and id_securitie = 36)) then
			update portfolios
			set deposition = deposition - new.amount,
				balance = balance - new.amount
			where id_portfolio = new.id_portfolio;

			update portfolio_to_securitie
			set total_quantity = total_quantity - new.amount
			where id_portfolio = new.id_portfolio and id_securitie = 36;
		else
			new.oper_status := false;
		end if;
	end if;
 	return new;
end;$$;


ALTER FUNCTION public.change_deposition_balance_funds() OWNER TO postgres;

--
-- Name: change_portfolio_to_securitie_queue(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.change_portfolio_to_securitie_queue() RETURNS trigger
    LANGUAGE plpgsql
    AS $$declare
quot numeric(20, 5) := (select quotation from securities
						where id_securitie = new.id_securitie);
n bigint;
rowq record;
summa numeric(20, 5) := 0;
begin
	new.id_employee := (select id_employee from portfolios
					   where id_portfolio = new.id_portfolio);
	new.total_price := new.quantity * quot;
	if (new.req_type) then
		if (new.total_price <= (select total_quantity from portfolio_to_securitie
							   where id_portfolio = new.id_portfolio and id_securitie = 36)) then
			update portfolio_to_securitie
			set total_quantity = total_quantity + new.quantity
			where id_portfolio = new.id_portfolio and id_securitie = new.id_securitie;

			update portfolio_to_securitie
			set total_quantity = total_quantity - new.total_price
			where id_portfolio = new.id_portfolio and id_securitie = 36;
			
			insert into queue
			values (new.id_portfolio, new.id_securitie, new.req_date, new.quantity, quot);
		else
			new.req_status := false;
		end if;
	else
		if (new.quantity <= (select total_quantity from portfolio_to_securitie
							where id_portfolio = new.id_portfolio and id_securitie = new.id_securitie)) then
			n := new.quantity;
			for rowq in (select * from queue
						 where id_portfolio = new.id_portfolio and id_securitie = new.id_securitie
						 order by queue_date)
			loop
				if (n = 0) then exit;
				end if;
				
				if (n >= rowq.quantity) then
					n := n - rowq.quantity;
					summa := summa + rowq.quantity * rowq.quotation;
					delete from queue
					where id_portfolio = rowq.id_portfolio and id_securitie = rowq.id_securitie and
						queue_date = rowq.queue_date;
				else
					summa := summa + n * rowq.quotation;
					update queue set quantity = quantity - n
					where id_portfolio = rowq.id_portfolio and id_securitie = rowq.id_securitie and
						queue_date = rowq.queue_date;
					n := 0;
				end if;
			end loop;
			
			new.commission := (new.total_price - summa) * 0.2504;
			
			update portfolio_to_securitie
			set total_quantity = total_quantity - new.quantity
			where id_portfolio = new.id_portfolio and id_securitie = new.id_securitie;

			update portfolio_to_securitie
			set total_quantity = total_quantity + new.total_price - new.commission
			where id_portfolio = new.id_portfolio and id_securitie = 36;
		else
			new.req_status := false;
		end if;
	end if;
	return new;
end;
$$;


ALTER FUNCTION public.change_portfolio_to_securitie_queue() OWNER TO postgres;

--
-- Name: insert_quotations(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.insert_quotations() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
begin
	insert into quotations_history
	values (new.id_securitie, default, new.quotation);
	return new;
end;
$$;


ALTER FUNCTION public.insert_quotations() OWNER TO postgres;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- Name: additional_info; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.additional_info (
    id_add_info smallint NOT NULL,
    yield_close character varying(20) NOT NULL,
    closing_date timestamp with time zone NOT NULL,
    coupon_payment_date timestamp with time zone NOT NULL,
    coupon character varying(50) NOT NULL,
    coupon_value numeric(20,5) NOT NULL,
    nominal numeric(20,5) NOT NULL,
    number_payments_per_year bigint NOT NULL,
    depreciation character varying(10) NOT NULL
);


ALTER TABLE public.additional_info OWNER TO postgres;

--
-- Name: additional_info_id_add_info_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.additional_info_id_add_info_seq
    AS smallint
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.additional_info_id_add_info_seq OWNER TO postgres;

--
-- Name: additional_info_id_add_info_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.additional_info_id_add_info_seq OWNED BY public.additional_info.id_add_info;


--
-- Name: auth_group; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.auth_group (
    id integer NOT NULL,
    name character varying(150) NOT NULL
);


ALTER TABLE public.auth_group OWNER TO postgres;

--
-- Name: auth_group_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.auth_group ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.auth_group_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: auth_group_permissions; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.auth_group_permissions (
    id bigint NOT NULL,
    group_id integer NOT NULL,
    permission_id integer NOT NULL
);


ALTER TABLE public.auth_group_permissions OWNER TO postgres;

--
-- Name: auth_group_permissions_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.auth_group_permissions ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.auth_group_permissions_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: auth_permission; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.auth_permission (
    id integer NOT NULL,
    name character varying(255) NOT NULL,
    content_type_id integer NOT NULL,
    codename character varying(100) NOT NULL
);


ALTER TABLE public.auth_permission OWNER TO postgres;

--
-- Name: auth_permission_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.auth_permission ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.auth_permission_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: auth_user; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.auth_user (
    id integer NOT NULL,
    password character varying(128) NOT NULL,
    last_login timestamp with time zone,
    is_superuser boolean NOT NULL,
    username character varying(150) NOT NULL,
    first_name character varying(150) NOT NULL,
    last_name character varying(150) NOT NULL,
    email character varying(254) NOT NULL,
    is_staff boolean NOT NULL,
    is_active boolean NOT NULL,
    date_joined timestamp with time zone NOT NULL,
    id_user smallint,
    patronymic character varying(150)
);


ALTER TABLE public.auth_user OWNER TO postgres;

--
-- Name: auth_user_groups; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.auth_user_groups (
    id bigint NOT NULL,
    user_id integer NOT NULL,
    group_id integer NOT NULL
);


ALTER TABLE public.auth_user_groups OWNER TO postgres;

--
-- Name: auth_user_groups_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.auth_user_groups ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.auth_user_groups_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: auth_user_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.auth_user ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.auth_user_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: auth_user_user_permissions; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.auth_user_user_permissions (
    id bigint NOT NULL,
    user_id integer NOT NULL,
    permission_id integer NOT NULL
);


ALTER TABLE public.auth_user_user_permissions OWNER TO postgres;

--
-- Name: auth_user_user_permissions_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.auth_user_user_permissions ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.auth_user_user_permissions_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: balances_history; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.balances_history (
    id_portfolio smallint NOT NULL,
    balance_date timestamp with time zone NOT NULL,
    balance numeric(20,5) NOT NULL
);


ALTER TABLE public.balances_history OWNER TO postgres;

--
-- Name: catalogs; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.catalogs (
    id_catalog smallint NOT NULL,
    catalog_name character varying(100) NOT NULL
);


ALTER TABLE public.catalogs OWNER TO postgres;

--
-- Name: django_admin_log; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.django_admin_log (
    id integer NOT NULL,
    action_time timestamp with time zone NOT NULL,
    object_id text,
    object_repr character varying(200) NOT NULL,
    action_flag smallint NOT NULL,
    change_message text NOT NULL,
    content_type_id integer,
    user_id integer NOT NULL,
    CONSTRAINT django_admin_log_action_flag_check CHECK ((action_flag >= 0))
);


ALTER TABLE public.django_admin_log OWNER TO postgres;

--
-- Name: django_admin_log_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.django_admin_log ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.django_admin_log_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: django_content_type; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.django_content_type (
    id integer NOT NULL,
    app_label character varying(100) NOT NULL,
    model character varying(100) NOT NULL
);


ALTER TABLE public.django_content_type OWNER TO postgres;

--
-- Name: django_content_type_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.django_content_type ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.django_content_type_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: django_migrations; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.django_migrations (
    id bigint NOT NULL,
    app character varying(255) NOT NULL,
    name character varying(255) NOT NULL,
    applied timestamp with time zone NOT NULL
);


ALTER TABLE public.django_migrations OWNER TO postgres;

--
-- Name: django_migrations_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.django_migrations ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.django_migrations_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: django_session; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.django_session (
    session_key character varying(40) NOT NULL,
    session_data text NOT NULL,
    expire_date timestamp with time zone NOT NULL
);


ALTER TABLE public.django_session OWNER TO postgres;

--
-- Name: employees; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.employees (
    id_employee smallint NOT NULL,
    id_post smallint NOT NULL
);


ALTER TABLE public.employees OWNER TO postgres;

--
-- Name: employees_id_employee_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.employees_id_employee_seq
    AS smallint
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.employees_id_employee_seq OWNER TO postgres;

--
-- Name: employees_id_employee_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.employees_id_employee_seq OWNED BY public.employees.id_employee;


--
-- Name: enterprises; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.enterprises (
    id_enterprise smallint NOT NULL,
    title character varying(100) NOT NULL,
    type_property character varying(50) NOT NULL,
    address character varying(150) NOT NULL,
    tel character varying(11) NOT NULL
);


ALTER TABLE public.enterprises OWNER TO postgres;

--
-- Name: enterprises_id_ent_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.enterprises_id_ent_seq
    AS smallint
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.enterprises_id_ent_seq OWNER TO postgres;

--
-- Name: enterprises_id_ent_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.enterprises_id_ent_seq OWNED BY public.enterprises.id_enterprise;


--
-- Name: messages; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.messages (
    id_message integer NOT NULL,
    id_sender smallint NOT NULL,
    id_receiver smallint NOT NULL,
    message_date timestamp with time zone NOT NULL,
    message_content text NOT NULL
);


ALTER TABLE public.messages OWNER TO postgres;

--
-- Name: messages_id_message_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.messages_id_message_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    MAXVALUE 2147483647
    CACHE 1;


ALTER SEQUENCE public.messages_id_message_seq OWNER TO postgres;

--
-- Name: messages_id_message_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.messages_id_message_seq OWNED BY public.messages.id_message;


--
-- Name: operations_history; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.operations_history (
    id_operation integer NOT NULL,
    oper_type boolean NOT NULL,
    oper_status boolean DEFAULT true NOT NULL,
    oper_date timestamp with time zone DEFAULT now() NOT NULL,
    amount numeric(20,5) NOT NULL,
    id_portfolio smallint NOT NULL
);


ALTER TABLE public.operations_history OWNER TO postgres;

--
-- Name: operations_history_id_operation_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.operations_history_id_operation_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    MAXVALUE 2147483647
    CACHE 1;


ALTER SEQUENCE public.operations_history_id_operation_seq OWNER TO postgres;

--
-- Name: operations_history_id_operation_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.operations_history_id_operation_seq OWNED BY public.operations_history.id_operation;


--
-- Name: portfolio_to_securitie; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.portfolio_to_securitie (
    id_portfolio smallint NOT NULL,
    id_securitie smallint NOT NULL,
    total_quantity numeric(20,5) NOT NULL,
    avg_quotation numeric(20,5) NOT NULL
);


ALTER TABLE public.portfolio_to_securitie OWNER TO postgres;

--
-- Name: portfolios; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.portfolios (
    id_portfolio smallint NOT NULL,
    balance numeric(20,5) NOT NULL,
    id_employee smallint,
    deposition numeric(20,5) NOT NULL,
    account_number numeric(21,0) NOT NULL,
    id_enterprise smallint NOT NULL
);


ALTER TABLE public.portfolios OWNER TO postgres;

--
-- Name: portfolios_id_portfolio_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.portfolios_id_portfolio_seq
    AS smallint
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.portfolios_id_portfolio_seq OWNER TO postgres;

--
-- Name: portfolios_id_portfolio_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.portfolios_id_portfolio_seq OWNED BY public.portfolios.id_portfolio;


--
-- Name: posts; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.posts (
    id_post smallint NOT NULL,
    post_name character varying(100) NOT NULL,
    salary numeric(8,2) NOT NULL
);


ALTER TABLE public.posts OWNER TO postgres;

--
-- Name: posts_id_post_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.posts_id_post_seq
    AS smallint
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.posts_id_post_seq OWNER TO postgres;

--
-- Name: posts_id_post_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.posts_id_post_seq OWNED BY public.posts.id_post;


--
-- Name: queue; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.queue (
    id_portfolio smallint NOT NULL,
    id_securitie smallint NOT NULL,
    queue_date timestamp with time zone NOT NULL,
    quantity bigint NOT NULL,
    quotation numeric(20,5) NOT NULL
);


ALTER TABLE public.queue OWNER TO postgres;

--
-- Name: quotations_history; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.quotations_history (
    id_securitie smallint NOT NULL,
    sec_date timestamp with time zone DEFAULT now() NOT NULL,
    quotation numeric(20,5) NOT NULL
);


ALTER TABLE public.quotations_history OWNER TO postgres;

--
-- Name: requests; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.requests (
    id_request integer NOT NULL,
    id_portfolio smallint NOT NULL,
    id_securitie smallint NOT NULL,
    req_type boolean NOT NULL,
    req_status boolean DEFAULT true NOT NULL,
    quantity bigint NOT NULL,
    req_date timestamp with time zone DEFAULT now() NOT NULL,
    commission numeric(20,5) DEFAULT 0 NOT NULL,
    total_price numeric(20,5) DEFAULT 0 NOT NULL,
    id_employee smallint DEFAULT 1 NOT NULL
);


ALTER TABLE public.requests OWNER TO postgres;

--
-- Name: requests_id_request_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.requests_id_request_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    MAXVALUE 2147483647
    CACHE 1;


ALTER SEQUENCE public.requests_id_request_seq OWNER TO postgres;

--
-- Name: requests_id_request_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.requests_id_request_seq OWNED BY public.requests.id_request;


--
-- Name: securities; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.securities (
    id_securitie smallint NOT NULL,
    sec_name character varying(100) NOT NULL,
    ticker character varying(100) NOT NULL,
    quotation numeric(15,5) NOT NULL,
    id_catalog smallint NOT NULL,
    description text,
    id_add_info smallint
);


ALTER TABLE public.securities OWNER TO postgres;

--
-- Name: TABLE securities; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TABLE public.securities IS 'Ценные бумаги';


--
-- Name: securities_id_securitie_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.securities_id_securitie_seq
    AS smallint
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.securities_id_securitie_seq OWNER TO postgres;

--
-- Name: securities_id_securitie_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.securities_id_securitie_seq OWNED BY public.securities.id_securitie;


--
-- Name: users; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.users (
    id_user smallint NOT NULL,
    id_employee smallint,
    id_enterprise smallint,
    CONSTRAINT user_check_is_null CHECK ((((id_employee IS NULL) OR (id_enterprise IS NULL)) AND ((id_employee IS NOT NULL) OR (id_enterprise IS NOT NULL))))
);


ALTER TABLE public.users OWNER TO postgres;

--
-- Name: users_id_user_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.users_id_user_seq
    AS smallint
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.users_id_user_seq OWNER TO postgres;

--
-- Name: users_id_user_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.users_id_user_seq OWNED BY public.users.id_user;


--
-- Name: сatalogs_id_catalog_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public."сatalogs_id_catalog_seq"
    AS smallint
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public."сatalogs_id_catalog_seq" OWNER TO postgres;

--
-- Name: сatalogs_id_catalog_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public."сatalogs_id_catalog_seq" OWNED BY public.catalogs.id_catalog;


--
-- Name: additional_info id_add_info; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.additional_info ALTER COLUMN id_add_info SET DEFAULT nextval('public.additional_info_id_add_info_seq'::regclass);


--
-- Name: catalogs id_catalog; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.catalogs ALTER COLUMN id_catalog SET DEFAULT nextval('public."сatalogs_id_catalog_seq"'::regclass);


--
-- Name: employees id_employee; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.employees ALTER COLUMN id_employee SET DEFAULT nextval('public.employees_id_employee_seq'::regclass);


--
-- Name: enterprises id_enterprise; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.enterprises ALTER COLUMN id_enterprise SET DEFAULT nextval('public.enterprises_id_ent_seq'::regclass);


--
-- Name: messages id_message; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.messages ALTER COLUMN id_message SET DEFAULT nextval('public.messages_id_message_seq'::regclass);


--
-- Name: operations_history id_operation; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.operations_history ALTER COLUMN id_operation SET DEFAULT nextval('public.operations_history_id_operation_seq'::regclass);


--
-- Name: portfolios id_portfolio; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.portfolios ALTER COLUMN id_portfolio SET DEFAULT nextval('public.portfolios_id_portfolio_seq'::regclass);


--
-- Name: posts id_post; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.posts ALTER COLUMN id_post SET DEFAULT nextval('public.posts_id_post_seq'::regclass);


--
-- Name: requests id_request; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.requests ALTER COLUMN id_request SET DEFAULT nextval('public.requests_id_request_seq'::regclass);


--
-- Name: securities id_securitie; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.securities ALTER COLUMN id_securitie SET DEFAULT nextval('public.securities_id_securitie_seq'::regclass);


--
-- Name: users id_user; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.users ALTER COLUMN id_user SET DEFAULT nextval('public.users_id_user_seq'::regclass);


--
-- Data for Name: additional_info; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.additional_info (id_add_info, yield_close, closing_date, coupon_payment_date, coupon, coupon_value, nominal, number_payments_per_year, depreciation) FROM stdin;
1	15.05%	2041-05-15 07:00:00+00	2024-06-05 07:00:00+00	Фиксированный	32.48000	1000.00000	2	Нет
2	14.23%	2038-05-19 07:00:00+00	2024-06-05 07:00:00+00	Фиксированный	44.84000	1000.00000	2	Нет
3	14.07%	2034-05-10 07:00:00+00	2024-06-22 07:00:00+00	Фиксированный	36.15000	1000.00000	2	Нет
4	18.06%	2029-04-06 07:00:00+00	2024-07-12 07:00:00+00	Фиксированный	24.68000	1000.00000	4	Нет
5	17.02%	2027-08-18 07:00:00+00	2024-06-04 07:00:00+00	Фиксированный	11.26000	1000.00000	12	Нет
6	20.27%	2025-07-22 07:00:00+00	2024-07-23 07:00:00+00	Фиксированный	30.79000	1000.00000	4	Нет
7	18.95%	2027-10-12 07:00:00+00	2024-07-16 07:00:00+00	Фиксированный	37.40000	1000.00000	2	Нет
8	23.67%	2026-01-26 07:00:00+00	2025-01-26 07:00:00+00	Фиксированный	3849.36000	98777.60000	1	Нет
9	6.79%	2028-02-26 07:00:00+00	2024-08-26 07:00:00+00	Фиксированный	2183.70000	90987.30000	2	Нет
\.


--
-- Data for Name: auth_group; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.auth_group (id, name) FROM stdin;
\.


--
-- Data for Name: auth_group_permissions; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.auth_group_permissions (id, group_id, permission_id) FROM stdin;
\.


--
-- Data for Name: auth_permission; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.auth_permission (id, name, content_type_id, codename) FROM stdin;
1	Can add log entry	1	add_logentry
2	Can change log entry	1	change_logentry
3	Can delete log entry	1	delete_logentry
4	Can view log entry	1	view_logentry
5	Can add permission	2	add_permission
6	Can change permission	2	change_permission
7	Can delete permission	2	delete_permission
8	Can view permission	2	view_permission
9	Can add group	3	add_group
10	Can change group	3	change_group
11	Can delete group	3	delete_group
12	Can view group	3	view_group
13	Can add user	4	add_user
14	Can change user	4	change_user
15	Can delete user	4	delete_user
16	Can view user	4	view_user
17	Can add content type	5	add_contenttype
18	Can change content type	5	change_contenttype
19	Can delete content type	5	delete_contenttype
20	Can view content type	5	view_contenttype
21	Can add session	6	add_session
22	Can change session	6	change_session
23	Can delete session	6	delete_session
24	Can view session	6	view_session
\.


--
-- Data for Name: auth_user; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.auth_user (id, password, last_login, is_superuser, username, first_name, last_name, email, is_staff, is_active, date_joined, id_user, patronymic) FROM stdin;
1	pbkdf2_sha256$720000$flEScovfWt942aqBBQP1hk$25WYhu7verMN0EsTIq8euOl+2LAlLeAkPPVc/mS4YXU=	2024-06-10 13:46:48.038066+00	f	qqqq@qqq.qq	вв	аа	qqqq@qqq.qq	f	t	2024-06-10 13:42:15.992766+00	\N	\N
2	pbkdf2_sha256$720000$LWx9MHROLHdNUfCCnayBTZ$HTaztvwUeF+kNzpWs2kqORXNG+Z8naX2M82QMSMYEKs=	2024-06-13 18:31:29.85429+00	f	qusssttt@gmail.com	Александр	Носков	qusssttt@gmail.com	f	t	2024-06-13 18:31:27.845134+00	26	Николаевич
\.


--
-- Data for Name: auth_user_groups; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.auth_user_groups (id, user_id, group_id) FROM stdin;
\.


--
-- Data for Name: auth_user_user_permissions; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.auth_user_user_permissions (id, user_id, permission_id) FROM stdin;
\.


--
-- Data for Name: balances_history; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.balances_history (id_portfolio, balance_date, balance) FROM stdin;
\.


--
-- Data for Name: catalogs; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.catalogs (id_catalog, catalog_name) FROM stdin;
1	Акции
2	Облигации
3	Фонды
4	Валюта и металлы
\.


--
-- Data for Name: django_admin_log; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.django_admin_log (id, action_time, object_id, object_repr, action_flag, change_message, content_type_id, user_id) FROM stdin;
\.


--
-- Data for Name: django_content_type; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.django_content_type (id, app_label, model) FROM stdin;
1	admin	logentry
2	auth	permission
3	auth	group
4	auth	user
5	contenttypes	contenttype
6	sessions	session
\.


--
-- Data for Name: django_migrations; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.django_migrations (id, app, name, applied) FROM stdin;
1	contenttypes	0001_initial	2024-06-09 19:41:50.469471+00
2	auth	0001_initial	2024-06-09 19:41:50.627266+00
3	admin	0001_initial	2024-06-09 19:41:50.670875+00
4	admin	0002_logentry_remove_auto_add	2024-06-09 19:41:50.685371+00
5	admin	0003_logentry_add_action_flag_choices	2024-06-09 19:41:50.703335+00
6	contenttypes	0002_remove_content_type_name	2024-06-09 19:41:50.764838+00
7	auth	0002_alter_permission_name_max_length	2024-06-09 19:41:50.781151+00
8	auth	0003_alter_user_email_max_length	2024-06-09 19:41:50.797429+00
9	auth	0004_alter_user_username_opts	2024-06-09 19:41:50.811629+00
10	auth	0005_alter_user_last_login_null	2024-06-09 19:41:50.827083+00
11	auth	0006_require_contenttypes_0002	2024-06-09 19:41:50.831144+00
12	auth	0007_alter_validators_add_error_messages	2024-06-09 19:41:50.845406+00
13	auth	0008_alter_user_username_max_length	2024-06-09 19:41:50.867843+00
14	auth	0009_alter_user_last_name_max_length	2024-06-09 19:41:50.886695+00
15	auth	0010_alter_group_name_max_length	2024-06-09 19:41:50.904242+00
16	auth	0011_update_proxy_permissions	2024-06-09 19:41:50.91877+00
17	auth	0012_alter_user_first_name_max_length	2024-06-09 19:41:50.934337+00
18	sessions	0001_initial	2024-06-09 19:41:50.964746+00
\.


--
-- Data for Name: django_session; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.django_session (session_key, session_data, expire_date) FROM stdin;
zohzpjgxgf4dsn7v8aagwkrfn24a2oy3	e30:1sGfHu:FHPETHOgd82M4zdq3Uf8F5eB-Y8sR6HZMXYIrzlJlXo	2024-06-24 13:42:18.106442+00
70vmo1vgp3w1zl0dpvwfuxkmy5xssdyt	.eJxVjM0OwiAQhN-FsyGwsvx49O4zkN1CpWpoUtqT8d2lSQ96nPm-mbeItK0lbi0vcUriIrQ4_XZMwzPXHaQH1fssh7muy8RyV-RBm7zNKb-uh_t3UKiVvgbOgRRlz8A2UFJAZ0fauGzQhs5wTB6BABxq7wN4a9CzUT0ywig-X-L5Nxo:1sGfMG:7kihBOVbs7oEJmh6ZdRjA-sxH6FlTg30jGeyXr40NZU	2024-06-24 13:46:48.042395+00
wg5txvgutdou23b6uqkmo6gnfq42eqhk	.eJxVjEEOwiAQRe_C2hCEMgMu3fcMBGaoVA0kpV0Z765NutDtf-_9lwhxW0vYel7CzOIitDj9binSI9cd8D3WW5PU6rrMSe6KPGiXY-P8vB7u30GJvXxrBNAOyU54JjWQVwCKYvI4DU47r-zgLbK22WhkMKSRwCZFDJxMtkq8P7V2NvU:1sHpEP:K89-ccHeV8NrSyWH67ByftqmCmurwRAWPGoYKyOt6e4	2024-06-27 18:31:29.862828+00
\.


--
-- Data for Name: employees; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.employees (id_employee, id_post) FROM stdin;
1	1
2	1
3	1
4	1
5	1
6	2
7	2
8	2
9	2
10	2
11	2
12	2
13	2
14	2
15	3
16	3
17	3
18	3
19	3
20	3
\.


--
-- Data for Name: enterprises; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.enterprises (id_enterprise, title, type_property, address, tel) FROM stdin;
1	Финансовые Свободы Инвестиции	Публичное	ул. Центральная 1, Иркутск, Россия	81234567890
3	Капитал для Успеха Инвест	Публичное	ул. Мира 56, Красноярск, Россия	89602587911
4	Инвестиционная Сила Финансов	Частное	ул. Красная 154, Новосибирск, Россия	89708523633
2	Доллары в Росте Инвест	Частное	пр. Победы 10, Москва, Россия	89876543210
9	SunRise Tactics	cybersport	ул. ивана алексеева 4	89998888888
\.


--
-- Data for Name: messages; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.messages (id_message, id_sender, id_receiver, message_date, message_content) FROM stdin;
\.


--
-- Data for Name: operations_history; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.operations_history (id_operation, oper_type, oper_status, oper_date, amount, id_portfolio) FROM stdin;
1	t	t	2023-01-10 07:30:00+00	2000000.00000	2
2	t	t	2023-01-13 07:30:00+00	1500000.00000	4
3	t	t	2023-01-15 05:30:00+00	1000000.00000	1
4	t	t	2023-01-15 05:32:00+00	1000000.00000	1
5	t	t	2023-01-18 08:32:00+00	500000.00000	2
6	t	t	2023-01-21 07:00:00+00	3000000.00000	4
7	t	t	2023-02-05 09:35:11+00	1000000.00000	2
8	t	t	2023-02-15 05:35:11+00	1000000.00000	1
9	t	t	2023-03-15 05:40:15+00	1000000.00000	1
10	t	t	2023-03-15 10:40:15+00	3000000.00000	2
15	t	t	2023-09-11 11:45:01+00	100000.00000	2
16	t	t	2023-09-15 05:50:17+00	1000000.00000	1
17	t	t	2023-09-15 09:05:01+00	7000000.00000	4
18	t	t	2023-09-15 09:05:01+00	750000.00000	3
20	t	t	2023-12-22 12:50:17+00	800000.00000	2
21	t	t	2024-01-22 09:15:17+00	800000.00000	3
22	t	t	2024-01-22 09:15:17+00	2000000.00000	4
23	t	t	2024-02-02 13:30:55+00	7000000.00000	2
26	t	t	2024-03-15 06:35:33+00	1000000.00000	1
27	t	t	2024-04-25 14:35:33+00	100000.00000	2
28	t	t	2024-05-05 09:35:33+00	1000000.00000	3
29	t	t	2024-05-05 09:35:33+00	1000000.00000	4
11	t	t	2023-03-18 08:32:00+00	5000000.00000	3
12	t	t	2023-05-15 09:00:11+00	1000000.00000	3
13	t	t	2023-07-15 05:45:01+00	1000000.00000	1
14	t	t	2023-07-16 09:10:15+00	300000.00000	3
19	t	t	2023-12-10 06:30:55+00	1000000.00000	1
25	f	t	2024-04-26 10:01:55+00	1900000.00000	4
24	f	t	2024-03-02 10:01:55+00	3000000.00000	3
37	f	f	2024-05-18 11:50:22.859357+00	2000000.00000	1
38	f	t	2024-05-18 11:51:12.41037+00	500000.00000	1
\.


--
-- Data for Name: portfolio_to_securitie; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.portfolio_to_securitie (id_portfolio, id_securitie, total_quantity, avg_quotation) FROM stdin;
1	5	470.00000	2135.00000
1	30	11500.00000	87.00000
1	6	213.00000	4862.00000
1	1	480.00000	4150.76042
2	1	500.00000	3990.00000
2	5	500.00000	1906.00000
2	4	452.00000	4422.50000
2	2	4700.00000	171.90000
2	30	48600.00000	72.30000
2	21	484522.00000	7.43000
2	26	5739.00000	156.80000
2	22	150000.00000	5.15000
3	22	12458.00000	6.01988
3	2	1202.00000	249.40000
3	8	12770.00000	78.30000
3	21	116686.00000	8.55000
3	1	816.00000	4360.70000
4	4	220.00000	4603.30000
4	8	20000.00000	49.81000
4	6	200.00000	4961.30000
4	21	0.00000	7.41000
4	1	710.00000	5612.95775
4	26	20134.00000	149.30000
4	36	3101278.62680	1.00000
3	36	326352.96416	1.00000
1	21	135870.00000	7.36000
2	36	580726.34000	1.00000
1	2	3000.00000	272.81000
1	36	889332.89920	1.00000
\.


--
-- Data for Name: portfolios; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.portfolios (id_portfolio, balance, id_employee, deposition, account_number, id_enterprise) FROM stdin;
1	10617345.39920	6	7500000.00000	12532100980007453987	1
2	22378029.86000	7	14500000.00000	98563210222368700098	2
3	9568106.18416	6	5850000.00000	14785200036999912330	3
4	17616320.34680	8	12600000.00000	10003145698733315478	4
\.


--
-- Data for Name: posts; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.posts (id_post, post_name, salary) FROM stdin;
1	Администратор	200000.00
2	Менеджер	100000.00
3	Техническая поддержка	50000.00
\.


--
-- Data for Name: queue; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.queue (id_portfolio, id_securitie, queue_date, quantity, quotation) FROM stdin;
1	2	2024-01-25 11:05:42+00	3000	272.81000
\.


--
-- Data for Name: quotations_history; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.quotations_history (id_securitie, sec_date, quotation) FROM stdin;
1	2024-06-09 19:53:53.696555+00	7510.00000
2	2024-06-09 19:53:53.696555+00	321.60000
4	2024-06-09 19:53:53.696555+00	6800.00000
5	2024-06-09 19:53:53.696555+00	3105.20000
3	2024-06-09 19:53:53.696555+00	3367.50000
6	2024-06-09 19:53:53.696555+00	5659.00000
7	2024-06-09 19:53:53.696555+00	4660.50000
8	2024-06-09 19:53:53.696555+00	129.86000
9	2024-06-09 19:53:53.696555+00	75.32000
10	2024-06-09 19:53:53.696555+00	45.98000
12	2024-06-09 19:53:53.696555+00	72.98300
13	2024-06-09 19:53:53.696555+00	63.56400
11	2024-06-09 19:53:53.696555+00	55.59600
14	2024-06-09 19:53:53.696555+00	93.95000
15	2024-06-09 19:53:53.696555+00	91.50000
16	2024-06-09 19:53:53.696555+00	91.69000
17	2024-06-09 19:53:53.696555+00	98.53000
18	2024-06-09 19:53:53.696555+00	83.45000
19	2024-06-09 19:53:53.696555+00	92.40950
23	2024-06-09 19:53:53.696555+00	1.41300
24	2024-06-09 19:53:53.696555+00	1.67350
25	2024-06-09 19:53:53.696555+00	146.95000
26	2024-06-09 19:53:53.696555+00	196.58000
27	2024-06-09 19:53:53.696555+00	152.68000
28	2024-06-09 19:53:53.696555+00	114.70000
21	2024-06-09 19:53:53.696555+00	8.45000
22	2024-06-09 19:53:53.696555+00	6.64000
20	2024-06-09 19:53:53.696555+00	0.97400
29	2024-06-09 19:53:53.696555+00	6622.90000
30	2024-06-09 19:53:53.696555+00	117.00000
31	2024-06-09 19:53:53.696555+00	89.34750
33	2024-06-09 19:53:53.696555+00	12.25550
32	2024-06-09 19:53:53.696555+00	19.94500
34	2024-06-09 19:53:53.696555+00	10.39900
35	2024-06-09 19:53:53.696555+00	2.75400
\.


--
-- Data for Name: requests; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.requests (id_request, id_portfolio, id_securitie, req_type, req_status, quantity, req_date, commission, total_price, id_employee) FROM stdin;
17	4	21	t	t	202430	2024-02-28 10:05:01+00	0.00000	1500006.30000	8
14	4	21	f	t	202430	2024-01-23 07:05:01+00	93773.67320	1874501.80000	8
9	4	8	t	t	20000	2023-02-05 12:05:01+00	0.00000	996200.00000	8
6	4	1	t	t	460	2023-09-22 09:05:01+00	0.00000	2987700.00000	8
43	1	2	t	t	3200	2024-01-25 11:05:42+00	0.00000	872992.00000	6
48	1	2	f	t	4200	2024-05-18 11:05:42+00	80065.90080	1358994.00000	6
24	1	30	t	t	11500	2024-04-01 07:05:01+00	0.00000	1000500.00000	6
20	1	1	t	t	230	2023-03-01 08:01:33+00	0.00000	994865.00000	6
19	1	6	t	t	213	2023-12-13 07:05:01+00	0.00000	1035606.00000	6
12	1	21	t	t	135870	2024-01-15 08:01:33+00	0.00000	1000003.20000	6
8	1	5	t	t	470	2023-08-02 08:01:33+00	0.00000	1003450.00000	6
2	1	2	t	t	4000	2023-04-03 07:05:01+00	0.00000	984680.00000	6
1	1	1	t	t	250	2023-02-01 07:05:01+00	0.00000	997500.00000	6
4	3	8	t	t	12770	2023-05-16 12:05:01+00	0.00000	999891.00000	6
29	3	2	t	t	1202	2024-07-17 11:01:33+00	0.00000	299778.80000	6
28	3	21	t	t	116686	2024-05-27 07:05:01+00	0.00000	997665.30000	6
27	3	1	f	t	330	2024-04-29 07:05:01+00	312514.22400	2686860.00000	6
26	3	21	f	t	107530	2024-04-17 10:05:01+00	49004.43184	995727.80000	6
25	3	1	t	t	1146	2023-03-19 07:01:33+00	0.00000	4997362.20000	6
16	3	21	t	t	107530	2023-09-16 08:05:01+00	0.00000	800023.20000	6
11	3	22	t	t	12458	2023-09-11 09:01:33+00	0.00000	749995.68000	6
5	2	22	t	t	150000	2023-05-20 09:01:33+00	0.00000	772500.00000	7
7	2	5	t	t	500	2023-12-12 08:05:01+00	0.00000	953000.00000	7
10	2	26	t	t	5739	2023-12-22 09:05:01+00	0.00000	899875.20000	7
13	2	2	t	t	4700	2023-03-03 12:05:01+00	0.00000	807930.00000	7
21	2	1	t	t	500	2023-02-01 08:01:33+00	0.00000	1995000.00000	7
22	2	4	t	t	452	2024-03-05 11:01:33+00	0.00000	1998970.00000	7
30	2	21	t	t	484522	2024-04-01 07:05:01+00	0.00000	3599998.46000	7
15	2	30	t	t	40000	2024-02-28 10:05:01+00	0.00000	2892000.00000	7
3	4	1	t	t	250	2023-02-03 07:01:33+00	0.00000	997500.00000	8
31	4	26	t	t	20134	2023-09-16 08:05:01+00	0.00000	3006006.20000	8
23	4	6	t	t	200	2023-05-20 09:01:33+00	0.00000	992260.00000	8
18	4	4	t	t	220	2024-02-03 11:01:33+00	0.00000	1012726.00000	8
\.


--
-- Data for Name: securities; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.securities (id_securitie, sec_name, ticker, quotation, id_catalog, description, id_add_info) FROM stdin;
36	Рубль	RUB	1.00000	4	\N	\N
12	ОФЗ 26243	SU26243RMFS4	72.98300	2	Облигации федерального займа (ОФЗ) – самые надежные ценные бумаги на российском фондовом рынке, потому что их выпускает государство в лице Минфина. Государство же и будет их погашать (возвращать номинал).	2
1	Лукойл	LKOH	7510.00000	1	ЛУКОЙЛ — одна из крупнейших нефтегазовых компаний в мире, на ее долю приходится 2% мировой добычи нефти и 1% доказанных запасов углеводородов. Компания представлена более чем в 30 странах, а в России ее деятельность охватывает около 70% регионов.\nЗначительную часть нефтепродуктов ЛУКОЙЛ реализует на розничном рынке через диверсифицированную сбытовую сеть, которая состоит из 5 309 АЗС и 132 нефтебаз в 18 странах мира. В 2022 году компания осуществила несколько крупных сделок по приобретению российских активов Shell – 411 АЗС, также завершила покупку доли 56,4% в энергетической компании «Энел Россия» в октябре 2022 года.	\N
2	Сбер	SBER	321.60000	1	СберБанк — крупнейший банк в России, Центральной и Восточной Европе, один из ведущих международных финансовых институтов. Сбер также является системно значимым банком и одной из крупнейших экосистем страны.\nУ компании более 107 млн активных частных клиентов и 3 млн активных корпоративных клиентов в России. Отделения Сбербанка представлены практически во всех населенных пунктах, а общее их число свыше 13 тысяч. Сбер — это флагман российского фондового рынка, как по капитализации, так и по дивидендам, которые компания выплачивает.	\N
4	Магнит	MGNT	6800.00000	1	Магнит — одна из ведущих розничных сетей по торговле продуктами питания в России. Работает по мультиформатной модели, которая включает в себя магазины «у дома», супермаркеты, аптеки и дискаунтеры. Компания также занимается производством продуктов питания под собственными торговыми марками и выращиванием овощей на предприятиях.\nНа конец июня 2023 года сеть насчитывает более 28 300 торговых точек и покрывает более 75% регионов России. Ежедневно магазины компании принимают около 17 млн посетителей, а в программе лояльности Магнита участвует более 72 млн человек.	\N
13	ОФЗ 26225	SU26225RMFS1	63.56400	2	Облигации федерального займа (ОФЗ) – самые надежные ценные бумаги на российском фондовом рынке, потому что их выпускает государство в лице Минфина. Государство же и будет их погашать (возвращать номинал).	3
15	Делимобиль 1Р-03	RU000A106A86	91.50000	2	Делимобиль — российский сервис краткосрочной аренды автомобилей, запущенный в 2015 году. Делимобиль работает в ряде городов России.	5
5	Positive Technologies	POSI	3105.20000	1	Positive Technologies — один из лидеров в сфере кибербезопасности на российском рынке, ее технологии и сервисы использует более 3 300 организаций по всему миру, в том числе 80% клиентов из рейтинга Эксперт-400 — списка крупнейших российских компаний.\nЭто первая публичная компания из сферы кибербезопасности в России, она провела единственное в 2022 году вторичное размещение акций на Мосбирже — крупнейшее по числу участников на этой площадке за последние 15 лет. При этом компания остается одним из бенефициаров ухода из России иностранных разработчиков средств защиты.	\N
3	ГК Самолёт	SMLT	3367.50000	1	ГК Самолет — одна из крупнейших федеральных корпораций в сфере PropTech и девелопмента. Портфель компании включает 43 проекта, а земельный банк составляет более 28 млн кв. м. Группа входит в число системообразующих организаций российской экономики и занимает первое место в Москве по объемам текущего строительства и второе место в России. Компания активно развивает свою онлайн-платформу, фонды коммерческой и арендной недвижимости и другие.	\N
6	Novabev Group	BELU	5659.00000	1	Novabev Group — один из ведущих игроков алкогольного сектора российской экономики, лидер по производству крепкого алкоголя: водки, коньяка, виски и ликеро-водочных изделий. В активах компании семь производственных комплексов, а продуктовая линейка представлена более 100 партнерскими и более 50 собственными брендами, три из которых — Беленькая, Архангельская и Царь — вошли в рейтинг 30 самых продаваемых водок в мире по версии The Millionaires’ Club в 2023 году.\nС 2011 года компания также сделала упор на дистрибуцию, стали открываться магазины сети Винлаб. В 2023 году масштаб собственной розничной сети превысил планку в 1 650 торговых точек, а общая аудитория программы лояльности превысила 7,0 млн человек.	\N
7	Ozon Holdings PLC	OZON	4660.50000	1	Ozon — мультикатегорийный маркетплейс, с развитой логистической сетью. Компания входит в топ-5 крупнейших российских ритейлеров и развивает бизнес в России, странах СНГ, Китае и Турции. По итогам первой половины 2023 года оборот маркетплейса превысил 675 млрд рублей. На Ozon торгует более 300 000 продавцов, которые предлагают на площадке более 200 млн товарных наименований. Платформу ежемесячно посещает более 65 млн пользователей Рунета, а число ее активных покупателей достигло 40 млн человек.\nOzon активно развивает систему сервисов, в числе которых собственный банк, а также сервисы быстрой доставки продуктов и бронирования путешествий.	\N
8	Совкомфлот	FLOT	129.86000	1	Совкомфлот — крупнейшая судоходная компания России, один из мировых лидеров в области морской транспортировки сжиженного газа, сырой нефти и нефтепродуктов, а также обслуживания и обеспечения морской добычи углеводородов. Рыночная доля компании по морским перевозкам энергоносителей в 2023 году приблизилась к 20%, тогда как в 2021-м была на уровне 5%.\nКомпания принимает участие в развитии десяти крупномасштабных энергетических проектов в тяжелых климатических условиях: восемь из них располагаются в России, по одному — в Индонезии и Канаде.	\N
9	АЛРОСА	ALRS	75.32000	1	АЛРОСА — крупнейшая в мире алмазодобывающая компания, занимается обработкой, продажей алмазов, производством бриллиантов. На компанию приходится более 25% мировой добычи алмазов. Ключевые добывающие активы расположены в Якутии и Архангельской области.\nКомпания имеет активную поддержку от государства: новый флагманский проект строительства подземного рудника на месторождении «Мир» в Якутии получит господдержку.	\N
10	Детский мир	DSKY	45.98000	1	Детский мир — крупнейший российский ритейлер на рынке детских товаров с более чем 75-летней историей. Группа объединяет розничные сети магазинов Детский мир и Детмир мини, интернет-магазин и маркетплейс, а также сеть товаров для животных Зоозавр.\nНа начало 2023 года сеть компании насчитывает около 1100 магазинов в более чем 400 городах России, Казахстане и Беларуси. Ежегодно сеть магазинов насчитывает более 240 млн\nпосещений.	\N
11	ОФЗ 26238	SU26238RMFS4	55.59600	2	Облигации федерального займа (ОФЗ) – самые надежные ценные бумаги на российском фондовом рынке, потому что их выпускает государство в лице Минфина. Государство же и будет их погашать (возвращать номинал).	1
14	ОКЕЙ ВЫПУСК 2	RU000A1009Z8	93.95000	2	О’кей входит в число крупнейших розничных сетей России. Группа представлена гипермаркетами под брендом О’кей и дискаунтерами под брендом ДА! Компания развивает стратегию омниканальности, это первый российский ритейлер, который запустил онлайн-сервис по заказу продуктов на базе гипермаркетов в Москве и Санкт-Петербурге. В активы компании входит около 250 магазинов в России общей торговой площадью 638 638 м².	4
16	М. Видео выпуск 3 	RU000A104ZK2	91.69000	2	М.Видео — крупнейшая в России сеть по продаже бытовой техники и электроники, объединяет розничные бренды М.Видео и Эльдорадо. Компания является одним из пионеров онлайн-ритейла в России: первый интернет-магазин М.Видео был открыт в 2001 году, а с 2014 года компания начала внедрение омниканальной бизнес-модели.\nВ 2021 году компания объединяла 1 137 магазинов в 314 городах России. Оборот М.Видео в 2021 году превысил 570 миллиардов рублей, при этом доля онлайн-продаж составила 68%, что делает компанию одним из крупнейших игроков онлайн-торговли в России.	6
17	ВИС Финанс выпуск 1	RU000A102952	98.53000	2	Группа «ВИС» – российский инфраструктурный холдинг, один из лидеров рынка государственно-частного партнёрства (ГЧП). Холдинг инвестирует собственные средства в создание объектов транспортной, социальной и коммунальной инфраструктуры и реализует проекты ГЧП и концессий «под ключ», управляя каждым этапом их жизненного цикла.	7
18	Газпром Капитал  БЗО26-1-Е	RU000A105QW3	83.45000	2	«Газпром» — глобальная энергетическая компания, кладовая мировых запасов природного газа. На нее приходится 12% мировой и 68% российской добычи газа. Входит в четвёрку крупнейших российских производителей нефти и является самой прибыльной российской компанией в 2022 году по версии Forbes.\nГазпром реализует более половины газа на внутреннем рынке, а также занимается его поставками в более чем 30 стран ближнего и дальнего зарубежья. В настоящее время компания активно реализует масштабные проекты по освоению газовых ресурсов арктического шельфа, Восточной Сибири и Дальнего Востока, а также ряд проектов по разведке и добыче углеводородов за рубежом.	8
19	ГТЛК ЗО28-Д	RU000A107CX7	92.40950	2	Государственная транспортная лизинговая компания - публичное акционерное общество, 100 % акций находятся в Государственной собственности. Работает на рынке лизинговых услуг с 2001 года. ГТЛК предлагает в лизинг все виды техники и оборудования для транспортной отрасли: лизинг автотранспорта и спецтехники (в том числе грузовых автомобилей и пассажирского транспорта), лизинг авиационной техники и аэропортового оборудования, лизинг железнодорожного подвижного состава, а также водного транспорт и портового оборудования.	9
23	ВИМ Ликвидность 	LQDT	1.41300	3	\N	\N
24	ВИМ Фонд Золото 	GOLD	1.67350	3	\N	\N
25	ВИМ Индекс Московской биржи 	EQMX	146.95000	3	\N	\N
26	Альфа-Капитал Управление 	AKME	196.58000	3	\N	\N
27	Альфа-Капитал Золото 	AKGD	152.68000	3	\N	\N
28	АТОН Российские акции	AMRE	114.70000	3	\N	\N
21	Тинькофф Золото 	TGLD	8.45000	3	Биржевой фонд поможет защитить накопления от инфляции без инфраструктурных рисков: золото хранится на территории России, валюта торгов — рубли.\nОн инвестирует в физическое золото на рынке драгоценных металлов Московской биржи.	\N
22	Тинькофф IMOEX 	TMOS	6.64000	3	Биржевой фонд в рублях позволяет вложиться в бумаги сразу нескольких десятков эмитентов по цене пая.\nОн повторяет индекс Мосбиржи и инвестирует в акции крупнейших российских компаний.	\N
20	Тинькофф Вечный портфель 	TUSD	0.97400	3	Биржевой фонд в рублях, задача которого — показывать результат и в период роста экономики, и в турбулентные времена.\nСбалансированный портфель фонда состоит из акций, долгосрочных облигаций, инструментов денежного рынка, а также золота.	\N
29	Золото	GLDRUB_TOM	6622.90000	4	\N	\N
30	Серебро	SLVRUB_TOM	117.00000	4	\N	\N
31	Доллар США	USD000UTSTOM	89.34750	4	\N	\N
33	Китайский юань 	CNYRUB_TOM	12.25550	4	\N	\N
32	Тенге	KZTRUB_TOM	19.94500	4	\N	\N
34	Гонконгский доллар	HKDRUB_TOM	10.39900	4	\N	\N
35	Турецкая лира 	TRYRUB_TOM	2.75400	4	\N	\N
\.


--
-- Data for Name: users; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.users (id_user, id_employee, id_enterprise) FROM stdin;
2	\N	1
4	\N	2
5	\N	3
16	\N	4
1	1	\N
3	2	\N
6	3	\N
7	4	\N
8	5	\N
9	6	\N
10	15	\N
11	16	\N
12	17	\N
13	18	\N
14	19	\N
15	20	\N
17	7	\N
18	8	\N
19	9	\N
20	10	\N
21	11	\N
22	12	\N
23	13	\N
24	14	\N
26	\N	9
\.


--
-- Name: additional_info_id_add_info_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.additional_info_id_add_info_seq', 1, false);


--
-- Name: auth_group_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.auth_group_id_seq', 1, false);


--
-- Name: auth_group_permissions_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.auth_group_permissions_id_seq', 1, false);


--
-- Name: auth_permission_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.auth_permission_id_seq', 24, true);


--
-- Name: auth_user_groups_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.auth_user_groups_id_seq', 1, false);


--
-- Name: auth_user_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.auth_user_id_seq', 2, true);


--
-- Name: auth_user_user_permissions_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.auth_user_user_permissions_id_seq', 1, false);


--
-- Name: django_admin_log_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.django_admin_log_id_seq', 1, false);


--
-- Name: django_content_type_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.django_content_type_id_seq', 6, true);


--
-- Name: django_migrations_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.django_migrations_id_seq', 18, true);


--
-- Name: employees_id_employee_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.employees_id_employee_seq', 20, true);


--
-- Name: enterprises_id_ent_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.enterprises_id_ent_seq', 9, true);


--
-- Name: messages_id_message_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.messages_id_message_seq', 1, false);


--
-- Name: operations_history_id_operation_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.operations_history_id_operation_seq', 38, true);


--
-- Name: portfolios_id_portfolio_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.portfolios_id_portfolio_seq', 4, true);


--
-- Name: posts_id_post_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.posts_id_post_seq', 3, true);


--
-- Name: requests_id_request_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.requests_id_request_seq', 48, true);


--
-- Name: securities_id_securitie_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.securities_id_securitie_seq', 36, true);


--
-- Name: users_id_user_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.users_id_user_seq', 26, true);


--
-- Name: сatalogs_id_catalog_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public."сatalogs_id_catalog_seq"', 4, true);


--
-- Name: additional_info additional_info_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.additional_info
    ADD CONSTRAINT additional_info_pkey PRIMARY KEY (id_add_info);


--
-- Name: auth_group auth_group_name_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.auth_group
    ADD CONSTRAINT auth_group_name_key UNIQUE (name);


--
-- Name: auth_group_permissions auth_group_permissions_group_id_permission_id_0cd325b0_uniq; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.auth_group_permissions
    ADD CONSTRAINT auth_group_permissions_group_id_permission_id_0cd325b0_uniq UNIQUE (group_id, permission_id);


--
-- Name: auth_group_permissions auth_group_permissions_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.auth_group_permissions
    ADD CONSTRAINT auth_group_permissions_pkey PRIMARY KEY (id);


--
-- Name: auth_group auth_group_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.auth_group
    ADD CONSTRAINT auth_group_pkey PRIMARY KEY (id);


--
-- Name: auth_permission auth_permission_content_type_id_codename_01ab375a_uniq; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.auth_permission
    ADD CONSTRAINT auth_permission_content_type_id_codename_01ab375a_uniq UNIQUE (content_type_id, codename);


--
-- Name: auth_permission auth_permission_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.auth_permission
    ADD CONSTRAINT auth_permission_pkey PRIMARY KEY (id);


--
-- Name: auth_user_groups auth_user_groups_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.auth_user_groups
    ADD CONSTRAINT auth_user_groups_pkey PRIMARY KEY (id);


--
-- Name: auth_user_groups auth_user_groups_user_id_group_id_94350c0c_uniq; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.auth_user_groups
    ADD CONSTRAINT auth_user_groups_user_id_group_id_94350c0c_uniq UNIQUE (user_id, group_id);


--
-- Name: auth_user auth_user_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.auth_user
    ADD CONSTRAINT auth_user_pkey PRIMARY KEY (id);


--
-- Name: auth_user_user_permissions auth_user_user_permissions_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.auth_user_user_permissions
    ADD CONSTRAINT auth_user_user_permissions_pkey PRIMARY KEY (id);


--
-- Name: auth_user_user_permissions auth_user_user_permissions_user_id_permission_id_14a6b632_uniq; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.auth_user_user_permissions
    ADD CONSTRAINT auth_user_user_permissions_user_id_permission_id_14a6b632_uniq UNIQUE (user_id, permission_id);


--
-- Name: auth_user auth_user_username_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.auth_user
    ADD CONSTRAINT auth_user_username_key UNIQUE (username);


--
-- Name: balances_history balances_history_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.balances_history
    ADD CONSTRAINT balances_history_pkey PRIMARY KEY (id_portfolio, balance_date);


--
-- Name: catalogs catalogs_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.catalogs
    ADD CONSTRAINT catalogs_pkey PRIMARY KEY (id_catalog);


--
-- Name: django_admin_log django_admin_log_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.django_admin_log
    ADD CONSTRAINT django_admin_log_pkey PRIMARY KEY (id);


--
-- Name: django_content_type django_content_type_app_label_model_76bd3d3b_uniq; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.django_content_type
    ADD CONSTRAINT django_content_type_app_label_model_76bd3d3b_uniq UNIQUE (app_label, model);


--
-- Name: django_content_type django_content_type_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.django_content_type
    ADD CONSTRAINT django_content_type_pkey PRIMARY KEY (id);


--
-- Name: django_migrations django_migrations_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.django_migrations
    ADD CONSTRAINT django_migrations_pkey PRIMARY KEY (id);


--
-- Name: django_session django_session_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.django_session
    ADD CONSTRAINT django_session_pkey PRIMARY KEY (session_key);


--
-- Name: employees employees_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.employees
    ADD CONSTRAINT employees_pkey PRIMARY KEY (id_employee);


--
-- Name: enterprises enterprises_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.enterprises
    ADD CONSTRAINT enterprises_pkey PRIMARY KEY (id_enterprise);


--
-- Name: enterprises enterprises_tel_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.enterprises
    ADD CONSTRAINT enterprises_tel_key UNIQUE (tel);


--
-- Name: messages messages_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.messages
    ADD CONSTRAINT messages_pkey PRIMARY KEY (id_message);


--
-- Name: operations_history operations_history_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.operations_history
    ADD CONSTRAINT operations_history_pkey PRIMARY KEY (id_operation);


--
-- Name: portfolio_to_securitie portfolio_to_securitie_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.portfolio_to_securitie
    ADD CONSTRAINT portfolio_to_securitie_pkey PRIMARY KEY (id_portfolio, id_securitie);


--
-- Name: portfolios portfolios_account_number_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.portfolios
    ADD CONSTRAINT portfolios_account_number_key UNIQUE (account_number);


--
-- Name: portfolios portfolios_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.portfolios
    ADD CONSTRAINT portfolios_pkey PRIMARY KEY (id_portfolio);


--
-- Name: posts posts_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.posts
    ADD CONSTRAINT posts_pkey PRIMARY KEY (id_post);


--
-- Name: queue queue_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.queue
    ADD CONSTRAINT queue_pkey PRIMARY KEY (id_portfolio, id_securitie, queue_date);


--
-- Name: quotations_history quotations_history_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.quotations_history
    ADD CONSTRAINT quotations_history_pkey PRIMARY KEY (id_securitie, sec_date);


--
-- Name: requests requests_id_request_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.requests
    ADD CONSTRAINT requests_id_request_pkey PRIMARY KEY (id_request);


--
-- Name: securities securities_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.securities
    ADD CONSTRAINT securities_pkey PRIMARY KEY (id_securitie);


--
-- Name: securities securities_sec_name_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.securities
    ADD CONSTRAINT securities_sec_name_key UNIQUE (sec_name);


--
-- Name: securities securities_ticker_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.securities
    ADD CONSTRAINT securities_ticker_key UNIQUE (ticker);


--
-- Name: users users_employee_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT users_employee_key UNIQUE (id_employee);


--
-- Name: users users_ent_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT users_ent_key UNIQUE (id_enterprise);


--
-- Name: users users_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT users_pkey PRIMARY KEY (id_user);


--
-- Name: auth_group_name_a6ea08ec_like; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX auth_group_name_a6ea08ec_like ON public.auth_group USING btree (name varchar_pattern_ops);


--
-- Name: auth_group_permissions_group_id_b120cbf9; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX auth_group_permissions_group_id_b120cbf9 ON public.auth_group_permissions USING btree (group_id);


--
-- Name: auth_group_permissions_permission_id_84c5c92e; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX auth_group_permissions_permission_id_84c5c92e ON public.auth_group_permissions USING btree (permission_id);


--
-- Name: auth_permission_content_type_id_2f476e4b; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX auth_permission_content_type_id_2f476e4b ON public.auth_permission USING btree (content_type_id);


--
-- Name: auth_user_groups_group_id_97559544; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX auth_user_groups_group_id_97559544 ON public.auth_user_groups USING btree (group_id);


--
-- Name: auth_user_groups_user_id_6a12ed8b; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX auth_user_groups_user_id_6a12ed8b ON public.auth_user_groups USING btree (user_id);


--
-- Name: auth_user_user_permissions_permission_id_1fbb5f2c; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX auth_user_user_permissions_permission_id_1fbb5f2c ON public.auth_user_user_permissions USING btree (permission_id);


--
-- Name: auth_user_user_permissions_user_id_a95ead1b; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX auth_user_user_permissions_user_id_a95ead1b ON public.auth_user_user_permissions USING btree (user_id);


--
-- Name: auth_user_username_6821ab7c_like; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX auth_user_username_6821ab7c_like ON public.auth_user USING btree (username varchar_pattern_ops);


--
-- Name: django_admin_log_content_type_id_c4bce8eb; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX django_admin_log_content_type_id_c4bce8eb ON public.django_admin_log USING btree (content_type_id);


--
-- Name: django_admin_log_user_id_c564eba6; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX django_admin_log_user_id_c564eba6 ON public.django_admin_log USING btree (user_id);


--
-- Name: django_session_expire_date_a5c62663; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX django_session_expire_date_a5c62663 ON public.django_session USING btree (expire_date);


--
-- Name: django_session_session_key_c0390e0f_like; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX django_session_session_key_c0390e0f_like ON public.django_session USING btree (session_key varchar_pattern_ops);


--
-- Name: queue change_avg_trigger; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER change_avg_trigger BEFORE INSERT OR DELETE ON public.queue FOR EACH ROW EXECUTE FUNCTION public.change_avg_quotation();


--
-- Name: securities change_balance_trigger; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER change_balance_trigger AFTER UPDATE ON public.securities FOR EACH STATEMENT EXECUTE FUNCTION public.change_balance();


--
-- Name: operations_history change_deposition_balance_funds_trigger; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER change_deposition_balance_funds_trigger BEFORE INSERT ON public.operations_history FOR EACH ROW EXECUTE FUNCTION public.change_deposition_balance_funds();


--
-- Name: requests change_portfolio_to_securitie_queue_trigger; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER change_portfolio_to_securitie_queue_trigger BEFORE INSERT ON public.requests FOR EACH ROW EXECUTE FUNCTION public.change_portfolio_to_securitie_queue();


--
-- Name: securities insert_quotations_trigger; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER insert_quotations_trigger AFTER UPDATE ON public.securities FOR EACH ROW EXECUTE FUNCTION public.insert_quotations();


--
-- Name: auth_group_permissions auth_group_permissio_permission_id_84c5c92e_fk_auth_perm; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.auth_group_permissions
    ADD CONSTRAINT auth_group_permissio_permission_id_84c5c92e_fk_auth_perm FOREIGN KEY (permission_id) REFERENCES public.auth_permission(id) DEFERRABLE INITIALLY DEFERRED;


--
-- Name: auth_group_permissions auth_group_permissions_group_id_b120cbf9_fk_auth_group_id; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.auth_group_permissions
    ADD CONSTRAINT auth_group_permissions_group_id_b120cbf9_fk_auth_group_id FOREIGN KEY (group_id) REFERENCES public.auth_group(id) DEFERRABLE INITIALLY DEFERRED;


--
-- Name: auth_permission auth_permission_content_type_id_2f476e4b_fk_django_co; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.auth_permission
    ADD CONSTRAINT auth_permission_content_type_id_2f476e4b_fk_django_co FOREIGN KEY (content_type_id) REFERENCES public.django_content_type(id) DEFERRABLE INITIALLY DEFERRED;


--
-- Name: auth_user_groups auth_user_groups_group_id_97559544_fk_auth_group_id; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.auth_user_groups
    ADD CONSTRAINT auth_user_groups_group_id_97559544_fk_auth_group_id FOREIGN KEY (group_id) REFERENCES public.auth_group(id) DEFERRABLE INITIALLY DEFERRED;


--
-- Name: auth_user_groups auth_user_groups_user_id_6a12ed8b_fk_auth_user_id; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.auth_user_groups
    ADD CONSTRAINT auth_user_groups_user_id_6a12ed8b_fk_auth_user_id FOREIGN KEY (user_id) REFERENCES public.auth_user(id) DEFERRABLE INITIALLY DEFERRED;


--
-- Name: auth_user auth_user_id_user_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.auth_user
    ADD CONSTRAINT auth_user_id_user_fkey FOREIGN KEY (id_user) REFERENCES public.users(id_user);


--
-- Name: auth_user_user_permissions auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.auth_user_user_permissions
    ADD CONSTRAINT auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm FOREIGN KEY (permission_id) REFERENCES public.auth_permission(id) DEFERRABLE INITIALLY DEFERRED;


--
-- Name: auth_user_user_permissions auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.auth_user_user_permissions
    ADD CONSTRAINT auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id FOREIGN KEY (user_id) REFERENCES public.auth_user(id) DEFERRABLE INITIALLY DEFERRED;


--
-- Name: balances_history balances_history_id_portfolio_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.balances_history
    ADD CONSTRAINT balances_history_id_portfolio_fkey FOREIGN KEY (id_portfolio) REFERENCES public.portfolios(id_portfolio);


--
-- Name: django_admin_log django_admin_log_content_type_id_c4bce8eb_fk_django_co; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.django_admin_log
    ADD CONSTRAINT django_admin_log_content_type_id_c4bce8eb_fk_django_co FOREIGN KEY (content_type_id) REFERENCES public.django_content_type(id) DEFERRABLE INITIALLY DEFERRED;


--
-- Name: django_admin_log django_admin_log_user_id_c564eba6_fk_auth_user_id; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.django_admin_log
    ADD CONSTRAINT django_admin_log_user_id_c564eba6_fk_auth_user_id FOREIGN KEY (user_id) REFERENCES public.auth_user(id) DEFERRABLE INITIALLY DEFERRED;


--
-- Name: employees employees_id_post_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.employees
    ADD CONSTRAINT employees_id_post_fkey FOREIGN KEY (id_post) REFERENCES public.posts(id_post);


--
-- Name: messages messages_id_receiver_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.messages
    ADD CONSTRAINT messages_id_receiver_fkey FOREIGN KEY (id_receiver) REFERENCES public.users(id_user);


--
-- Name: messages messages_id_sender_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.messages
    ADD CONSTRAINT messages_id_sender_fkey FOREIGN KEY (id_sender) REFERENCES public.users(id_user);


--
-- Name: operations_history operations_history_id_portfolio_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.operations_history
    ADD CONSTRAINT operations_history_id_portfolio_fkey FOREIGN KEY (id_portfolio) REFERENCES public.portfolios(id_portfolio);


--
-- Name: portfolio_to_securitie portfolio_to_securitie_id_portfolio_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.portfolio_to_securitie
    ADD CONSTRAINT portfolio_to_securitie_id_portfolio_fkey FOREIGN KEY (id_portfolio) REFERENCES public.portfolios(id_portfolio);


--
-- Name: portfolio_to_securitie portfolio_to_securitie_id_securitie_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.portfolio_to_securitie
    ADD CONSTRAINT portfolio_to_securitie_id_securitie_fkey FOREIGN KEY (id_securitie) REFERENCES public.securities(id_securitie);


--
-- Name: portfolios portfolios_id_employee_fk; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.portfolios
    ADD CONSTRAINT portfolios_id_employee_fk FOREIGN KEY (id_employee) REFERENCES public.employees(id_employee);


--
-- Name: portfolios portfolios_id_ent_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.portfolios
    ADD CONSTRAINT portfolios_id_ent_fkey FOREIGN KEY (id_enterprise) REFERENCES public.enterprises(id_enterprise);


--
-- Name: queue queue_id_portfolio_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.queue
    ADD CONSTRAINT queue_id_portfolio_fkey FOREIGN KEY (id_portfolio) REFERENCES public.portfolios(id_portfolio);


--
-- Name: queue queue_id_securitie_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.queue
    ADD CONSTRAINT queue_id_securitie_fkey FOREIGN KEY (id_securitie) REFERENCES public.securities(id_securitie);


--
-- Name: quotations_history quotations_history_id_securitie_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.quotations_history
    ADD CONSTRAINT quotations_history_id_securitie_fkey FOREIGN KEY (id_securitie) REFERENCES public.securities(id_securitie);


--
-- Name: requests requests_id_employee_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.requests
    ADD CONSTRAINT requests_id_employee_fkey FOREIGN KEY (id_employee) REFERENCES public.employees(id_employee);


--
-- Name: requests requests_id_portfolio_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.requests
    ADD CONSTRAINT requests_id_portfolio_fkey FOREIGN KEY (id_portfolio) REFERENCES public.portfolios(id_portfolio);


--
-- Name: requests requests_id_securitie_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.requests
    ADD CONSTRAINT requests_id_securitie_fkey FOREIGN KEY (id_securitie) REFERENCES public.securities(id_securitie);


--
-- Name: securities securities_catalog_fk; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.securities
    ADD CONSTRAINT securities_catalog_fk FOREIGN KEY (id_catalog) REFERENCES public.catalogs(id_catalog);


--
-- Name: securities securities_id_add_info_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.securities
    ADD CONSTRAINT securities_id_add_info_fkey FOREIGN KEY (id_add_info) REFERENCES public.additional_info(id_add_info);


--
-- Name: users users_id_employee_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT users_id_employee_fkey FOREIGN KEY (id_employee) REFERENCES public.employees(id_employee);


--
-- Name: users users_id_ent_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT users_id_ent_fkey FOREIGN KEY (id_enterprise) REFERENCES public.enterprises(id_enterprise);


--
-- PostgreSQL database dump complete
--

